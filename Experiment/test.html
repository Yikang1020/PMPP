<!DOCTYPE html>
<html>
  <head>
    <script src="jspsych/dist/jspsych.js"></script>
    <script src="jspsych/dist/plugin-fullscreen.js"></script>
    <script src="jspsych/dist/plugin-instructions.js"></script>
    <script src="jspsych/dist/plugin-image-keyboard-response.js"></script>
    <script src="jspsych/dist/plugin-html-keyboard-response.js"></script>
    <script src="jspsych/dist/plugin-preload.js"></script>
    <link rel="stylesheet" href="jspsych/dist/jspsych.css">
  </head>
  <body></body>
  <script>

    var jsPsych = initJsPsych({
    });


    var fullscreen_trial = {
      type: jsPsychFullscreen,
      fullscreen_mode: true
    };

    // all images are used in standard trials that can be automatically preloaded (as well as being used in trials 
    // that use timeline variables), so we can preload all image files with the auto_preload option
    var preload = {
      type: jsPsychPreload,
      auto_preload: true
    };

    var instructions = {
      type: jsPsychInstructions,
      pages: ['<p>This is a new set of instructions.</p><p>Custom "Page X/Y" and next/previous button labels provide support for different languages.</p>',
        '<p>This is the second page of instructions.</p>',
        '<p>This is the final page.</p>'],
      show_clickable_nav: true,
      show_page_number: true,
      button_label_previous: 'Previous',
      button_label_next: 'Next',
      page_label: 'Page',
    };

    var cue = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: '<p style="color: green; font-size: 48px; font-weight: bold;">GREEN</p>',
      choices: "NO_KEYS",
      trial_duration: 2000,
    prompt: '<p>No response allowed. 2s wait.</p>'
    }

    var target = {
      type: jsPsychImageKeyboardResponse,
      stimulus: jsPsych.timelineVariable('stim'),
      trial_duration: 3000,
      prompt: '<p>Watch the faces.</p>',
      stimulus_width: 400, 
      maintain_aspect_ratio: true,
      post_trial_gap: 0,
    };


    var judgement = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: '<p style="color: black; font-size: 48px; font-weight: bold;">congruent</p>'+
        '<p style="color: black; font-size: 30px; font-weight: bold;">vs</p>'+
        '<p style="color: black; font-size: 48px; font-weight: bold;">incongruent</p>',
      choices: ['f','j'],
      //trial_duration: 5000,
      prompt: '<p>No response allowed. 2s wait.</p>'
    };


    var trial_proc = {
      timeline: [cue,target,judgement],
      timeline_variables: [ 
        {stim: 'img/materials/stim1.jpg'},
        {stim: 'img/materials/stim2.jpg'}
      ],
      repetitions: 3
    };


    jsPsych.run([fullscreen_trial,instructions,cue,trial_proc,judgement]);

  </script>
</html>